---
title: 数据类型
---

# 概述

> 参考：
>
> - [官方文档，参考-规范-类型](https://go.dev/ref/spec#Types)

**Data Type(数据类型)** 用来对一组相关值进行分类，描述可对其执行的操作并定义它们的存储方式。 通常也会称为 **Literal(字面量)**

Go 语言将数据类型分为四类：基础类型、复合类型、引用类型和接口类型。虽然数据类型有很多，但是这些数据类型都是对程序中一个变量或状态的间接引用。这意味着对任一引用类型数据的修改都会影响所有该引用的拷贝。所谓的引用，是对值的引用。注意引用与指针的区别，详见 pointer.go

## Underlying Type(基本类型)

数据中最基本的类型，是构成其余数据类型以及对象的最小单位，当定义其他数据类型时，同样需要定义基础数据类型。基础数据类型也是 Go 语言的**内置数据类型**

- **Numeric(数字类型)**
  - Integer Type(整数类型)
  - Floating Point Numbers(浮点数型)
  - complex 复数共两种复数，complex64 和 complex128，分别对应 float32 和 float64 两种浮点数精度。内置的 complex 函数用于构建复数，内建的 real 和 imag 函数分别返回复数的实部和虚部
- **Strings(字符类型)**
- **Booleans(布尔类型)**
  - 注意：很多时候，Booleans 类型的值可以用数字表示
    - 1 表示 true(真)
    - 0 表示 false(假)

## Composite Type(复合类型)

是通过组合基础数据类型，来表达更复杂的数据结构

- Arrays(数组) # 多个相同基础类型的数据组合在一起
- Slices(切片)
- Maps(字典)
- Functions(函数，这里面主要指的是函数的参数的数据类型)
- Structs(结构体) #
- Interfaces(接口)
- Channels(通道)
- Pointers(指针)

## 自定义数据类型(类型定义)

变量或表达式的 Type 定义了对应存储值的属性特征，例如数值在内存的存储大小（或者是元素的 bit 个数），它们在内部是如何表达的，是否支持一些操作符，以及它们自己关联的方法集等。

在任何程序中都会存在一些变量有着相同的内部结构，但是却表示完全不同的概念。例如，一个 int 类型的变量可以用来表示一个循环的迭代索引、或者一个时间戳、或者一个文件描述符、或者一个月份；一个 float64 类型的变量可以用来表示每秒移动几米的速度、或者是不同温度单位下的温度；一个字符串可以用来表示一个密码或者一个颜色的名称。这些基于基本数据类型所生成的新数据类型都叫数据类型。再比如数组、切片、字典等，虽然在有的时候他们的基础数据类型可以使一样的，但是他们本身所表示的数据类型是不同的含义。

一个类型声明语句创建了一个新的类型名称，和现有类型具有相同的底层结构。新命名的类型提供了一个方法，用来分隔不同概念的类型，这样即使它们底层类型相同也是不兼容的。

格式：`type TypeID BaseType`

如果自定义数据类型的 BaseType 是由零个或多个任意类型的值(每个值对应一个类型)聚合成的实体，则需要使用 [Struct](/docs/2.编程/高级编程语言/Go/Go%20 标准库/Maps(映射)%20 与%20Struct(结构体).md 与 Struct(结构体).md)

**Type Definition(类型定义)** 是 Go 实现面向对象编程的最基本要素

# 类型检测

详见 [反射](</docs/2.编程/高级编程语言/Go/Go%20 标准库/Method(方法)、Interface(接口).md>>) 特性

# 类型转换

> 参考：
>
> - [官方 Tour，基础-13](https://go.dev/tour/basics/13)

语法：`Type(Expression)`

- 将 Expression 获取到的值转换为 Type 类型。

> 注意：这种语法属于强制类型转换，若出现错误将会 panic。如果想要处理错误，可以使用 strconv 库等

注意：若 Type 为指针类型，最好写成这样：`(Type)(Expression)`，比如：

```go
 type stringValue string
 p := new(string)
 a := (*stringValue)(p)
 fmt.Println(a)
```

# 格式化占位符

> 参考：
>
> - [Go 包，标准库-fmt](https://pkg.go.dev/fmt#hdr-Printing)
> - [博客园，情三-golang fmt 格式“占位符”](https://www.cnblogs.com/qing123/articles/4353353.html)

格式化占位符，也可以称为 **format verbs(格式化动词)**。这些动词可以在输出时，告诉数据应该以什么类型、样式输出。这类似于 C 语言的 printf 和 scanf，但是更简洁。

以下面的代码为例：

```go
type Human struct {
    Name string
}
var people = Human{Name:"zhangsan"}
```

## 普通占位符

| 占位符 | 说明                           | 举例                  | 输出                        |
| ------ | ------------------------------ | --------------------- | --------------------------- |
| %v     | 根据值来自动推断类型的默认格式 | Printf("%v", people)  | {zhangsan}，                |
| %+v    | 打印结构体时，会添加字段名     | Printf("%+v", people) | {Name:zhangsan}             |
| %#v    | 相应值的 Go 语法表示           | Printf("#v", people)  | main.Human{Name:"zhangsan"} |
| %T     | 相应值的类型的 Go 语法表示     | Printf("%T", people)  | main.Human                  |
| %%     | 字面上的百分号，并非值的占位符 | Printf("%%")          | %                           |

## 布尔占位符

| 占位符 | 说明            | 举例               | 输出 |
| ------ | --------------- | ------------------ | ---- |
| %t     | true 或 false。 | Printf("%t", true) | true |

## 整数占位符

| 占位符 | 说明                                         | 举例                 | 输出   |
| ------ | -------------------------------------------- | -------------------- | ------ |
| %b     | 二进制表示                                   | Printf("%b", 5)      | 101    |
| %c     | 相应 Unicode 码点所表示的字符                | Printf("%c", 0x4E2D) | 中     |
| %d     | 十进制表示                                   | Printf("%d", 0x12)   | 18     |
| %o     | 八进制表示                                   | Printf("%d", 10)     | 12     |
| %q     | 单引号围绕的字符字面值，由 Go 语法安全地转义 | Printf("%q", 0x4E2D) | '中'   |
| %x     | 十六进制表示，字母形式为小写 a-f             | Printf("%x", 13)     | d      |
| %X     | 十六进制表示，字母形式为大写 A-F             | Printf("%x", 13)     | D      |
| %U     | Unicode 格式：U+1234，等同于 "U+%04X"        | Printf("%U", 0x4E2D) | U+4E2D |

## 浮点数和复数的组成部分(实部和虚部)

| 占位符 | 说明                                                                                | 举例                   | 输出         |
| ------ | ----------------------------------------------------------------------------------- | ---------------------- | ------------ |
| %b     | 无小数部分的，指数为二的幂的科学计数法,与 strconv.FormatFloat 的 'b' 转换格式一致。 |                        | -123456p-78  |
| %e     | 科学计数法，例如 -1234.456e+78                                                      | Printf("%e", 10.2)     | 1.020000e+01 |
| %E     | 科学计数法，例如 -1234.456E+78                                                      | Printf("%e", 10.2)     | 1.020000E+01 |
| %f     | 有小数点而无指数，例如 123.456                                                      | Printf("%f", 10.2)     | 10.200000    |
| %g     | 根据情况选择 %e 或 %f 以产生更紧凑的(无末尾的 0)输出                                | Printf("%g", 10.20)    | 10.2         |
| %G     | 根据情况选择 %E 或 %f 以产生更紧凑的(无末尾的 0)输出                                | Printf("%G", 10.20+2i) | (10.2+2i)    |

## 字符串与字节切片

| 占位符 | 说明                                     | 举例                             | 输出         |
| ------ | ---------------------------------------- | -------------------------------- | ------------ |
| %s     | 输出字符串表示(string 类型或\[]byte)     | Printf("%s", \[]byte("Go 语言")) | Go 语言      |
| %q     | 双引号围绕的字符串，由 Go 语法安全地转义 | Printf("%q", "Go 语言")          | "Go 语言"    |
| %x     | 十六进制，小写字母，每字节两个字符       | Printf("%x", "golang")           | 676f6c616e67 |
| %X     | 十六进制，大写字母，每字节两个字符       | Printf("%X", "golang")           | 676F6C616E67 |

## 指针

| 占位符 | 说明                  | 举例                   | 输出     |
| ------ | --------------------- | ---------------------- | -------- |
| %p     | 十六进制表示，前缀 0x | Printf("%p", \&people) | 0x4f57f0 |

## 其它标记

| 占位符                                                                                                                                                                                                          | 说明                                                                                                  | 举例                  | 输出           |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------- | --------------------- | -------------- |
| +                                                                                                                                                                                                               | 总打印数值的正负号；对于%q(%+q)保证只输出 ASCII 编码的字符。                                          | Printf("%+q", "中文") | "\u4e2d\u6587" |
| -                                                                                                                                                                                                               | 在右侧而非左侧填充空格(左对齐该区域)                                                                  |                       |                |
| #                                                                                                                                                                                                               | 备用格式：为八进制添加前导 0(%#o)                                                                     |
| 为十六进制添加前导 0x(%#x)或 0X(%#X)，为 %p(%#p)去掉前导 0x；如果可能的话，%q(%#q)会打印原始 (即反引号围绕的)字符串；如果是可打印字符，%U(%#U)会写出该字符的 Unicode 编码形式(如字符 x 会被打印成 U+0078 'x')。 | Printf("%#U", '中')                                                                                   | U+4E2D                |
| ' '                                                                                                                                                                                                             | (空格)为数值中省略的正负号留出空白(% d)；以十六进制(% x, % X)打印字符串或切片时，在字节之间用空格隔开 |                       |                |
| 0                                                                                                                                                                                                               | 填充前导的 0 而非空格；对于数字，这会将填充移到正负号之后                                             |                       |                |

golang 没有 '%u' 点位符，若整数为无符号类型，默认就会被打印成无符号的。

宽度与精度的控制格式以 Unicode 码点为单位。宽度为该数值占用区域的最小宽度；精度为小数点之后的位数。

操作数的类型为 int 时，宽度与精度都可用字符`*`表示。

对于 %g/%G 而言，精度为所有数字的总数，例如：123.45，%.4g 会打印 123.5，(而 %6.2f 会打印 123.45)。

%e 和 %f 的默认精度为 6

对大多数的数值类型而言，宽度为输出的最小字符数，如果必要的话会为已格式化的形式填充空格。

而以字符串类型，精度为输出的最大字符数，如果必要的话会直接截断。
