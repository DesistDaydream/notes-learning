---
title: 虚拟化管理
weight: 1
---

# 概述

尽管 QEMU 有一个 CLI([qemu-system](/docs/IT学习笔记/10.云原生/1.2.实现虚拟化的工具/KVM_QEMU/KVM_QEMU%20命令行工具/qemu-system.md)) 和一个 [monior](https://qemu-project.gitlab.io/qemu/system/monitor.html) 来与 VM 进行交互，但这些工具通常仅用于开发目的，也就是调试底层逻辑。[Libvirt](/docs/IT学习笔记/10.云原生/1.2.实现虚拟化的工具/虚拟化管理/Libvirt/Libvirt.md) 提供了对特定版本和管理程序的抽象，并封装了一些解决方法和最佳实践

> 虽然 Libvirt 最终在文件系统中，也是调用 qemu-system 工具启动虚拟机，但是使用起来，不用记很多晦涩的参数，并且还提供 GUI 给用户使用。

# 创建虚拟机后常见操作

根据[虚拟化调试和优化指南](docs/IT学习笔记/10.云原生/1.2.实现虚拟化的工具/虚拟化管理/性能优化与故障处理/虚拟化调试和优化指南.md)调优，`virsh edit XXX` 修改文件

使用 `systemctl enable serial-getty@ttyS0.service --now` 启动 serial-getty 服务，以便通过 `virsh console` 命令连接虚拟机

压缩 qcow2 文件，创建 backing file 的 qcow2 和 xml 文件当做模板以便批量创建虚拟机所用

- `qemu-img convert -c -O qcow2 test.qcow2 test.qcow2.new`



