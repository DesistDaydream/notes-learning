---
title: Vmware
---

# 概述

> 参考：
> - [官网](https://www.vmware.com/)

# Vmware Workstation 的网络说明

VMware 软件里可以提供一个虚拟交换机，PC 中创建的虚拟网卡与该虚拟机交换机直连，虚拟机也与该虚拟交换机直连
一、虚拟机发出的数据包两种走向：
（1）虚拟机——虚拟交换机——PC 上的虚拟网卡。到此为止，因为 PC 上的虚拟网卡和物理网卡是二层设备不在一个广播域，也无法路由
（2）虚拟机——虚拟交换机——VMware 的虚拟 NAT 设备——PC 上的物理网卡——Internet。
二、主机发出的数据包走向（通过虚拟网卡发送）主机发送的其余包，均通过本地网卡转发
（1）PC——PC 上的虚拟网卡——虚拟交换机——虚拟机。主机到虚拟机的路径仅此一条

结论：

1. 禁用虚拟网卡后虚拟机依然可以访问外网，但是 PC 无法访问虚拟机。因为第一条中的（2）和第二条中的（1）
2. 启用静态 IP 后，PC 可以访问虚拟机，但是虚拟机只能访问到虚拟网卡，外网不同。因为第一条中的（1）（2）

仅主机模式说明

1. 创建一个虚拟交换机，所有 VM 连接到该虚拟交换机上，即可实现通信

Nat 模型说明：

1. 如图所示，VM 访问外网时通过虚拟 NAT 设备来进行外网访问的，可以把虚拟 NAT 设备当做一个具备 nat 功能的路由器，所以当给 VM 配置静态 IP 的时候，如果想连接外网，需要把网关配置成这个虚拟 NAT 设备上上端口的 IP，一般为 XXX.XXX.XXX.2.
2. 其余说明详见图中红字

![](https://notes-learning.oss-cn-beijing.aliyuncs.com/gafu3p/1616124111669-8462c7ae-7e65-42c3-93e2-4162bdf5b29a.jpeg)
