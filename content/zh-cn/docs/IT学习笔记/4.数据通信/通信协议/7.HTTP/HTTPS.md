---
title: HTTPS
---

# 概述

**Hyper Text Transfer Protocol over Secure Socket Layer(简称 HTTPS) **是以安全为目标的 HTTP 通道，简单讲是 HTTP 的安全版。即 HTTP 下加入 SSL 层，HTTPS 的安全基础是 SSL，因此加密的详细内容就需要 SSL。 它是一个 URI scheme（抽象标识符体系），句法类同 http:体系。用于安全的 HTTP 数据传输。https://URL 表明它使用了 HTTP，但 HTTPS 存在不同于 HTTP 的默认端口及一个加密/身份验证层（在 HTTP 与 TCP 之间）。这个系统的最初研发由网景公司(Netscape)进行，并内置于其浏览器 Netscape Navigator 中，提供了身份验证与加密通讯方法。现在它被广泛用于万维网上安全敏感的通讯，例如交易支付方面。

## HTTP 和 HTTPS 区别

https 本质是 http 与 ssl 结合的协议，并没有绝对意义上的 https 协议。需要到 ca 申请证书，一般免费证书很少，需要交费。

http 是超文本传输协议，信息是明文传输，https 则是具有安全性的 ssl 加密传输协议 http 和 https 使用的是完全不同的连接方式用的端口也不一样：前者是 80，后者是 443。

http 的连接很简单，是无状态的 HTTPS 协议是由 SSL+HTTP 协议构建的可进行加密传输、身份认证的网络协议 要比 http 协议安全

## HTTPS 解决的问题

（1）信任主机的问题。

采用 https 的 server 必须从 CA 申请一个用于证明服务器用途类型的证书。

该证书只有用于对应的 server 的时候，客户度才信任次主机。所以目前所有的银行系统网站，关键部分应用都是 https 的。 客户通过信任该证书，从而信任了该主机。其实这样做效率很低，但是银行更侧重安全。 这一点对我们没有任何意义，我们的 server，采用的证书不管自己 issue 还是从公众的地方 issue， 客户端都是自己人，所以我们也就肯定信任该 server。

（2）通讯过程中的数据的泄密和被窜改。

1\)一般意义上的 https， 就是 server 有一个证书。

a) 主要目的是保证 server 就是他声称的 server。这个跟第一点一样。

b) 服务端和客户端之间的所有通讯，都是加密的。

i、具体讲，是客户端产生一个对称的密钥，通过 server 的证书来交换密钥。 一般意义上的握手过程。

ii、加下来所有的信息往来就都是加密的。 第三方即使截获，也没有任何意义。因为他没有密钥。 当然窜改也就没有什么意义了。

2\)少许对客户端有要求的情况下，会要求客户端也必须有一个证书。

a) 这里客户端证书，其实就类似表示个人信息的时候，除了用户名/密码， 还有一个 CA 认证过的身份。 应为个人证书一般来说上别人无法模拟的，所有这样能够更深的确认自己的身份。

b) 目前少数个人银行的专业版是这种做法，具体证书可能是拿 U 盘作为一个备份的载体。像我用的交通银行的网上银行就是采取的这种方式。 HTTPS 一定是繁琐的。

a) 本来简单的 http 协议，一个 get 一个 response。由于 https 要还密钥和确认加密算法的需要。单握手就需要 6/7 个往返。

i、任何应用中，过多的 round trip 肯定影响性能。

b) 接下来才是具体的 http 协议，每一次响应或者请求， 都要求客户端和服务端对会话的内容做加密/解密。

i、尽管对称加密/解密效率比较高，可是仍然要消耗过多的 CPU，为此有专门的 SSL 芯片。 如果 CPU 信能比较低的话，肯定会降低性能，从而不能 serve 更多的请求。

附 SSL 的简介

SSL 是 Netscape 公司所提出的安全保密协议，在浏览器(如 Internet Explorer、Netscape Navigator)和 Web 服务器(如 Netscape 的 Netscape Enterprise Server、ColdFusion Server 等等)之间构造安全通道来进行数据传输，SSL 运行在 TCP/IP 层之上、应用层之下，为应用程序提供加密数据通道，它采用了 RC4、MD5 以及 RSA 等加密算法，使用 40 位的密钥，适用于商业信息的加密。

同时，Netscape 公司相应开发了 HTTPS 协议并内置于其浏览器中，HTTPS 实际上就是 SSL over HTTP，它使用默认端口 443，而不是像 HTTP 那样使用端口 80 来和 TCP/IP 进行通信。HTTPS 协议使用 SSL 在发送方把原始数据进行加密，然 后在接受方进行解密，加密和解密需要发送方和接受方通过交换共知的密钥来实现，因此，所传送的数据不容易被网络黑客截获和解密。

然而，加密和解密过程需要耗费系统大量的开销，严重降低机器的性能，相关测试数据表明使用 HTTPS 协议传输数据的工作效率只有使用 HTTP 协议传输的十分之一。

假如为了安全保密，将一个网站所有的 Web 应用都启用 SSL 技术来加密，并使用 HTTPS 协议进行传输，那么该网站的性能和效率将会大大降低，而且 没有这个必要，因为一般来说并不是所有数据都要求那么高的安全保密级别，所以，我们只需对那些涉及机密数据的交互处理使用 HTTPS 协议，这样就做到鱼与 熊掌兼得。总之不需要用 https 的地方，就尽量不要用。

# 双向认证

![](https://notes-learning.oss-cn-beijing.aliyuncs.com/qygdgr/1660900843557-9912cd1f-2f59-4860-97e3-f9a8640772bf.png)
