---
title: ansible.builtin(å†…ç½®æ¨¡å—)
---

# æ¦‚è¿°

> å‚è€ƒï¼š
> - [å®˜æ–¹æ–‡æ¡£,å‚è€ƒ-æ‰€æœ‰æ¨¡å—å’Œæ’ä»¶çš„ç´¢å¼•-æ‰€æœ‰æ¨¡å—çš„ç´¢å¼•-ansible.builtin](https://docs.ansible.com/ansible/latest/collections/index_module.html#ansible-builtin)

- [ansible.builtin.add_host](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/add_host_module.html#ansible-collections-ansible-builtin-add-host-module) â€“ Add a host (and alternatively a group) to the ansible-playbook in-memory inventory
- [ansible.builtin.apt](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/apt_module.html#ansible-collections-ansible-builtin-apt-module) â€“ Manages apt-packages
- [ansible.builtin.apt_key](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/apt_key_module.html#ansible-collections-ansible-builtin-apt-key-module) â€“ Add or remove an apt key
- [ansible.builtin.apt_repository](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/apt_repository_module.html#ansible-collections-ansible-builtin-apt-repository-module) â€“ Add and remove APT repositories
- [ansible.builtin.assemble](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/assemble_module.html#ansible-collections-ansible-builtin-assemble-module) â€“ Assemble configuration files from fragments
- [ansible.builtin.assert](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/assert_module.html#ansible-collections-ansible-builtin-assert-module) â€“ Asserts given expressions are true
- [ansible.builtin.async_status](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/async_status_module.html#ansible-collections-ansible-builtin-async-status-module) â€“ Obtain status of asynchronous task
- [ansible.builtin.blockinfile](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/blockinfile_module.html#ansible-collections-ansible-builtin-blockinfile-module) â€“ Insert/update/remove a text block surrounded by marker lines
- [ansible.builtin.command](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/command_module.html#ansible-collections-ansible-builtin-command-module) â€“ Execute commands on targets
- [ansible.builtin.copy](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/copy_module.html#ansible-collections-ansible-builtin-copy-module) â€“ Copy files to remote locations
- [ansible.builtin.cron](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/cron_module.html#ansible-collections-ansible-builtin-cron-module) â€“ Manage cron.d and crontab entries
- [ansible.builtin.debconf](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/debconf_module.html#ansible-collections-ansible-builtin-debconf-module) â€“ Configure a .deb package
- [ansible.builtin.debug](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/debug_module.html#ansible-collections-ansible-builtin-debug-module) â€“ Print statements during execution
- [ansible.builtin.dnf](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/dnf_module.html#ansible-collections-ansible-builtin-dnf-module) â€“ Manages packages with the dnf package manager
- [ansible.builtin.dpkg_selections](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/dpkg_selections_module.html#ansible-collections-ansible-builtin-dpkg-selections-module) â€“ Dpkg package selection selections
- [ansible.builtin.expect](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/expect_module.html#ansible-collections-ansible-builtin-expect-module) â€“ Executes a command and responds to prompts
- [ansible.builtin.fail](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/fail_module.html#ansible-collections-ansible-builtin-fail-module) â€“ Fail with custom message
- [ansible.builtin.fetch](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/fetch_module.html#ansible-collections-ansible-builtin-fetch-module) â€“ Fetch files from remote nodes
- [ansible.builtin.file](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/file_module.html#ansible-collections-ansible-builtin-file-module) â€“ Manage files and file properties
- [ansible.builtin.find](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/find_module.html#ansible-collections-ansible-builtin-find-module) â€“ Return a list of files based on specific criteria
- [ansible.builtin.gather_facts](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/gather_facts_module.html#ansible-collections-ansible-builtin-gather-facts-module) â€“ Gathers facts about remote hosts
- [ansible.builtin.get_url](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/get_url_module.html#ansible-collections-ansible-builtin-get-url-module) â€“ Downloads files from HTTP, HTTPS, or FTP to node
- [ansible.builtin.getent](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/getent_module.html#ansible-collections-ansible-builtin-getent-module) â€“ A wrapper to the unix getent utility
- [ansible.builtin.git](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/git_module.html#ansible-collections-ansible-builtin-git-module) â€“ Deploy software (or files) from git checkouts
- [ansible.builtin.group](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/group_module.html#ansible-collections-ansible-builtin-group-module) â€“ Add or remove groups
- [ansible.builtin.group_by](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/group_by_module.html#ansible-collections-ansible-builtin-group-by-module) â€“ Create Ansible groups based on facts
- [ansible.builtin.hostname](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/hostname_module.html#ansible-collections-ansible-builtin-hostname-module) â€“ Manage hostname
- [ansible.builtin.import_playbook](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/import_playbook_module.html#ansible-collections-ansible-builtin-import-playbook-module) â€“ Import a playbook
- [ansible.builtin.import_role](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/import_role_module.html#ansible-collections-ansible-builtin-import-role-module) â€“ Import a role into a play
- [ansible.builtin.import_tasks](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/import_tasks_module.html#ansible-collections-ansible-builtin-import-tasks-module) â€“ Import a task list
- [ansible.builtin.include](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/include_module.html#ansible-collections-ansible-builtin-include-module) â€“ Include a play or task list
- [ansible.builtin.include_role](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/include_role_module.html#ansible-collections-ansible-builtin-include-role-module) â€“ Load and execute a role
- [ansible.builtin.include_tasks](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/include_tasks_module.html#ansible-collections-ansible-builtin-include-tasks-module) â€“ Dynamically include a task list
- [ansible.builtin.include_vars](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/include_vars_module.html#ansible-collections-ansible-builtin-include-vars-module) â€“ Load variables from files, dynamically within a task
- [ansible.builtin.iptables](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/iptables_module.html#ansible-collections-ansible-builtin-iptables-module) â€“ Modify iptables rules
- [ansible.builtin.known_hosts](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/known_hosts_module.html#ansible-collections-ansible-builtin-known-hosts-module) â€“ Add or remove a host from the known_hosts file
- [ansible.builtin.lineinfile](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/lineinfile_module.html#ansible-collections-ansible-builtin-lineinfile-module) â€“ Manage lines in text files
- [ansible.builtin.meta](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/meta_module.html#ansible-collections-ansible-builtin-meta-module) â€“ Execute Ansible â€˜actionsâ€™
- [ansible.builtin.package](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/package_module.html#ansible-collections-ansible-builtin-package-module) â€“ Generic OS package manager
- [ansible.builtin.package_facts](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/package_facts_module.html#ansible-collections-ansible-builtin-package-facts-module) â€“ Package information as facts
- [ansible.builtin.pause](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/pause_module.html#ansible-collections-ansible-builtin-pause-module) â€“ Pause playbook execution
- [ansible.builtin.ping](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/ping_module.html#ansible-collections-ansible-builtin-ping-module) â€“ Try to connect to host, verify a usable python and return pong on success
- [ansible.builtin.pip](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/pip_module.html#ansible-collections-ansible-builtin-pip-module) â€“ Manages Python library dependencies
- [ansible.builtin.raw](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/raw_module.html#ansible-collections-ansible-builtin-raw-module) â€“ Executes a low-down and dirty command
- [ansible.builtin.reboot](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/reboot_module.html#ansible-collections-ansible-builtin-reboot-module) â€“ Reboot a machine
- [ansible.builtin.replace](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html#ansible-collections-ansible-builtin-replace-module) â€“ Replace all instances of a particular string in a file using a back-referenced regular expression
- [ansible.builtin.rpm_key](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/rpm_key_module.html#ansible-collections-ansible-builtin-rpm-key-module) â€“ Adds or removes a gpg key from the rpm db
- [ansible.builtin.script](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/script_module.html#ansible-collections-ansible-builtin-script-module) â€“ Runs a local script on a remote node after transferring it
- [ansible.builtin.service](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/service_module.html#ansible-collections-ansible-builtin-service-module) â€“ Manage services
- [ansible.builtin.service_facts](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/service_facts_module.html#ansible-collections-ansible-builtin-service-facts-module) â€“ Return service state information as fact data
- [ansible.builtin.set_fact](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/set_fact_module.html#ansible-collections-ansible-builtin-set-fact-module) â€“ Set host variable(s) and fact(s).
- [ansible.builtin.set_stats](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/set_stats_module.html#ansible-collections-ansible-builtin-set-stats-module) â€“ Define and display stats for the current ansible run
- [ansible.builtin.setup](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/setup_module.html#ansible-collections-ansible-builtin-setup-module) â€“ Gathers facts about remote hosts
- [ansible.builtin.shell](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/shell_module.html#ansible-collections-ansible-builtin-shell-module) â€“ Execute shell commands on targets
- [ansible.builtin.slurp](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/slurp_module.html#ansible-collections-ansible-builtin-slurp-module) â€“ Slurps a file from remote nodes
- [ansible.builtin.stat](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html#ansible-collections-ansible-builtin-stat-module) â€“ Retrieve file or file system status
- [ansible.builtin.subversion](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/subversion_module.html#ansible-collections-ansible-builtin-subversion-module) â€“ Deploys a subversion repository
- [ansible.builtin.systemd](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/systemd_module.html#ansible-collections-ansible-builtin-systemd-module) â€“ Manage systemd units
- [ansible.builtin.sysvinit](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/sysvinit_module.html#ansible-collections-ansible-builtin-sysvinit-module) â€“ Manage SysV services.
- [ansible.builtin.tempfile](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/tempfile_module.html#ansible-collections-ansible-builtin-tempfile-module) â€“ Creates temporary files and directories
- [ansible.builtin.template](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/template_module.html#ansible-collections-ansible-builtin-template-module) â€“ Template a file out to a target host
- [ansible.builtin.unarchive](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/unarchive_module.html#ansible-collections-ansible-builtin-unarchive-module) â€“ Unpacks an archive after (optionally) copying it from the local machine
- [ansible.builtin.uri](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/uri_module.html#ansible-collections-ansible-builtin-uri-module) â€“ Interacts with webservices
- [ansible.builtin.user](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/user_module.html#ansible-collections-ansible-builtin-user-module) â€“ Manage user accounts
- [ansible.builtin.validate_argument_spec](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/validate_argument_spec_module.html#ansible-collections-ansible-builtin-validate-argument-spec-module) â€“ Validate role argument specs.
- [ansible.builtin.wait_for](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/wait_for_module.html#ansible-collections-ansible-builtin-wait-for-module) â€“ Waits for a condition before continuing
- [ansible.builtin.wait_for_connection](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/wait_for_connection_module.html#ansible-collections-ansible-builtin-wait-for-connection-module) â€“ Waits until remote system is reachable/usable
- [ansible.builtin.yum](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/yum_module.html#ansible-collections-ansible-builtin-yum-module) â€“ Manages packages with the yum package manager
- [ansible.builtin.yum_repository](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/yum_repository_module.html#ansible-collections-ansible-builtin-yum-repository-module) â€“ Add or remove YUM repositories

æ ¹æ® [2.9 ç‰ˆæœ¬çš„æ¨¡å—ç´¢å¼•](https://docs.ansible.com/ansible/2.9/modules/modules_by_category.html)æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢è¿™äº›å†…ç½®æ¨¡å—è¿›è¡Œç±»åˆ«åˆ’åˆ†

# Commands # å‘½ä»¤æ¨¡å—

> å®˜æ–¹æ–‡æ¡£ï¼š<https://docs.ansible.com/ansible/2.9/modules/list_of_commands_modules.html>

- [command â€“ Execute commands on targets](https://docs.ansible.com/ansible/2.9/modules/command_module.html#command-module)
- [expect â€“ Executes a command and responds to prompts](https://docs.ansible.com/ansible/2.9/modules/expect_module.html#expect-module)
- [psexec â€“ Runs commands on a remote Windows host based on the PsExec model](https://docs.ansible.com/ansible/2.9/modules/psexec_module.html#psexec-module)
- [raw â€“ Executes a low-down and dirty command](https://docs.ansible.com/ansible/2.9/modules/raw_module.html#raw-module)
- [script â€“ Runs a local script on a remote node after transferring it](https://docs.ansible.com/ansible/2.9/modules/script_module.html#script-module)
- [shell â€“ Execute shell commands on targets](https://docs.ansible.com/ansible/2.9/modules/shell_module.html#shell-module)
- [telnet â€“ Executes a low-down and dirty telnet command](https://docs.ansible.com/ansible/2.9/modules/telnet_module.html#telnet-module)

## [command](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/command_module.html) # åœ¨å—ç®¡ç†èŠ‚ç‚¹ä¸Šæ‰§è¡Œå‘½ä»¤

## [script](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/script_module.html) # å°†æœ¬åœ°è„šæœ¬ä¼ è¾“åˆ°å—ç®¡ç†èŠ‚ç‚¹ä¸Šå¹¶è¿è¡Œ

# Files # æ–‡ä»¶å¤„ç†æ¨¡å—

è¯¦è§ ã€Š[Files ç±»æ¨¡å—](âœIT å­¦ä¹ ç¬”è®°/ğŸ› ï¸9.è¿ç»´/Ansible/Ansible%20Modules(æ¨¡å—)/ansible.builtin(å†…ç½®æ¨¡å—)/Files%20 ç±»æ¨¡å—.md ç±»æ¨¡å—.md)ã€‹

# Packaging # åŒ…æ¨¡å—

> å®˜æ–¹æ–‡æ¡£ï¼š<https://docs.ansible.com/ansible/2.9/modules/list_of_packaging_modules.html>

## Language

- [bower â€“ Manage bower packages with bower](https://docs.ansible.com/ansible/2.9/modules/bower_module.html#bower-module)
- [bundler â€“ Manage Ruby Gem dependencies with Bundler](https://docs.ansible.com/ansible/2.9/modules/bundler_module.html#bundler-module)
- [composer â€“ Dependency Manager for PHP](https://docs.ansible.com/ansible/2.9/modules/composer_module.html#composer-module)
- [cpanm â€“ Manages Perl library dependencies](https://docs.ansible.com/ansible/2.9/modules/cpanm_module.html#cpanm-module)
- [easy_install â€“ Installs Python libraries](https://docs.ansible.com/ansible/2.9/modules/easy_install_module.html#easy-install-module)
- [gem â€“ Manage Ruby gems](https://docs.ansible.com/ansible/2.9/modules/gem_module.html#gem-module)
- [maven_artifact â€“ Downloads an Artifact from a Maven Repository](https://docs.ansible.com/ansible/2.9/modules/maven_artifact_module.html#maven-artifact-module)
- [npm â€“ Manage node.js packages with npm](https://docs.ansible.com/ansible/2.9/modules/npm_module.html#npm-module)
- [pear â€“ Manage pear/pecl packages](https://docs.ansible.com/ansible/2.9/modules/pear_module.html#pear-module)
- [pip â€“ Manages Python library dependencies](https://docs.ansible.com/ansible/2.9/modules/pip_module.html#pip-module)
- [pip_package_info â€“ pip package information](https://docs.ansible.com/ansible/2.9/modules/pip_package_info_module.html#pip-package-info-module)
- [yarn â€“ Manage node.js packages with Yarn](https://docs.ansible.com/ansible/2.9/modules/yarn_module.html#yarn-module)

## Os

- [apk â€“ Manages apk packages](https://docs.ansible.com/ansible/2.9/modules/apk_module.html#apk-module)
- [apt â€“ Manages apt-packages](https://docs.ansible.com/ansible/2.9/modules/apt_module.html#apt-module)
- [apt_key â€“ Add or remove an apt key](https://docs.ansible.com/ansible/2.9/modules/apt_key_module.html#apt-key-module)
- [apt_repo â€“ Manage APT repositories via apt-repo](https://docs.ansible.com/ansible/2.9/modules/apt_repo_module.html#apt-repo-module)
- [apt_repository â€“ Add and remove APT repositories](https://docs.ansible.com/ansible/2.9/modules/apt_repository_module.html#apt-repository-module)
- [apt_rpm â€“ apt_rpm package manager](https://docs.ansible.com/ansible/2.9/modules/apt_rpm_module.html#apt-rpm-module)
- [dnf â€“ Manages packages with the dnf package manager](https://docs.ansible.com/ansible/2.9/modules/dnf_module.html#dnf-module)
- [dpkg_selections â€“ Dpkg package selection selections](https://docs.ansible.com/ansible/2.9/modules/dpkg_selections_module.html#dpkg-selections-module)
- [flatpak â€“ Manage flatpaks](https://docs.ansible.com/ansible/2.9/modules/flatpak_module.html#flatpak-module)
- [flatpak_remote â€“ Manage flatpak repository remotes](https://docs.ansible.com/ansible/2.9/modules/flatpak_remote_module.html#flatpak-remote-module)
- [homebrew â€“ Package manager for Homebrew](https://docs.ansible.com/ansible/2.9/modules/homebrew_module.html#homebrew-module)
- [homebrew_cask â€“ Install/uninstall homebrew casks](https://docs.ansible.com/ansible/2.9/modules/homebrew_cask_module.html#homebrew-cask-module)
- [homebrew_tap â€“ Tap a Homebrew repository](https://docs.ansible.com/ansible/2.9/modules/homebrew_tap_module.html#homebrew-tap-module)
- [installp â€“ Manage packages on AIX](https://docs.ansible.com/ansible/2.9/modules/installp_module.html#installp-module)
- [layman â€“ Manage Gentoo overlays](https://docs.ansible.com/ansible/2.9/modules/layman_module.html#layman-module)
- [macports â€“ Package manager for MacPorts](https://docs.ansible.com/ansible/2.9/modules/macports_module.html#macports-module)
- [openbsd_pkg â€“ Manage packages on OpenBSD](https://docs.ansible.com/ansible/2.9/modules/openbsd_pkg_module.html#openbsd-pkg-module)
- [opkg â€“ Package manager for OpenWrt](https://docs.ansible.com/ansible/2.9/modules/opkg_module.html#opkg-module)
- [package â€“ Generic OS package manager](https://docs.ansible.com/ansible/2.9/modules/package_module.html#package-module)
- [package_facts â€“ package information as facts](https://docs.ansible.com/ansible/2.9/modules/package_facts_module.html#package-facts-module)
- [pacman â€“ Manage packages with pacman](https://docs.ansible.com/ansible/2.9/modules/pacman_module.html#pacman-module)
- [pkg5 â€“ Manages packages with the Solaris 11 Image Packaging System](https://docs.ansible.com/ansible/2.9/modules/pkg5_module.html#pkg5-module)
- [pkg5_publisher â€“ Manages Solaris 11 Image Packaging System publishers](https://docs.ansible.com/ansible/2.9/modules/pkg5_publisher_module.html#pkg5-publisher-module)
- [pkgin â€“ Package manager for SmartOS, NetBSD, et al](https://docs.ansible.com/ansible/2.9/modules/pkgin_module.html#pkgin-module)
- [pkgng â€“ Package manager for FreeBSD >= 9.0](https://docs.ansible.com/ansible/2.9/modules/pkgng_module.html#pkgng-module)
- [pkgutil â€“ Manage CSW-Packages on Solaris](https://docs.ansible.com/ansible/2.9/modules/pkgutil_module.html#pkgutil-module)
- [portage â€“ Package manager for Gentoo](https://docs.ansible.com/ansible/2.9/modules/portage_module.html#portage-module)
- [portinstall â€“ Installing packages from FreeBSDâ€™s ports system](https://docs.ansible.com/ansible/2.9/modules/portinstall_module.html#portinstall-module)
- [pulp_repo â€“ Add or remove Pulp repos from a remote host](https://docs.ansible.com/ansible/2.9/modules/pulp_repo_module.html#pulp-repo-module)
- [redhat_subscription â€“ Manage registration and subscriptions to RHSM using the subscription-manager command](https://docs.ansible.com/ansible/2.9/modules/redhat_subscription_module.html#redhat-subscription-module)
- [rhn_channel â€“ Adds or removes Red Hat software channels](https://docs.ansible.com/ansible/2.9/modules/rhn_channel_module.html#rhn-channel-module)
- [rhn_register â€“ Manage Red Hat Network registration using the rhnreg_ks command](https://docs.ansible.com/ansible/2.9/modules/rhn_register_module.html#rhn-register-module)
- [rhsm_release â€“ Set or Unset RHSM Release version](https://docs.ansible.com/ansible/2.9/modules/rhsm_release_module.html#rhsm-release-module)
- [rhsm_repository â€“ Manage RHSM repositories using the subscription-manager command](https://docs.ansible.com/ansible/2.9/modules/rhsm_repository_module.html#rhsm-repository-module)
- [rpm_key â€“ Adds or removes a gpg key from the rpm db](https://docs.ansible.com/ansible/2.9/modules/rpm_key_module.html#rpm-key-module)
- [slackpkg â€“ Package manager for Slackware >= 12.2](https://docs.ansible.com/ansible/2.9/modules/slackpkg_module.html#slackpkg-module)
- [snap â€“ Manages snaps](https://docs.ansible.com/ansible/2.9/modules/snap_module.html#snap-module)
- [sorcery â€“ Package manager for Source Mage GNU/Linux](https://docs.ansible.com/ansible/2.9/modules/sorcery_module.html#sorcery-module)
- [svr4pkg â€“ Manage Solaris SVR4 packages](https://docs.ansible.com/ansible/2.9/modules/svr4pkg_module.html#svr4pkg-module)
- [swdepot â€“ Manage packages with swdepot package manager (HP-UX)](https://docs.ansible.com/ansible/2.9/modules/swdepot_module.html#swdepot-module)
- [swupd â€“ Manages updates and bundles in ClearLinux systems](https://docs.ansible.com/ansible/2.9/modules/swupd_module.html#swupd-module)
- [urpmi â€“ Urpmi manager](https://docs.ansible.com/ansible/2.9/modules/urpmi_module.html#urpmi-module)
- [xbps â€“ Manage packages with XBPS](https://docs.ansible.com/ansible/2.9/modules/xbps_module.html#xbps-module)
- [yum â€“ Manages packages with the yum package manager](https://docs.ansible.com/ansible/2.9/modules/yum_module.html#yum-module)
- [yum_repository â€“ Add or remove YUM repositories](https://docs.ansible.com/ansible/2.9/modules/yum_repository_module.html#yum-repository-module)
- [zypper â€“ Manage packages on SUSE and openSUSE](https://docs.ansible.com/ansible/2.9/modules/zypper_module.html#zypper-module)
- [zypper_repository â€“ Add and remove Zypper repositories](https://docs.ansible.com/ansible/2.9/modules/zypper_repository_module.html#zypper-repository-module)

## [yum](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/yum_module.html) # ä½¿ç”¨ä¸»æœºä¸Šçš„ yum å·¥å…·ç®¡ç†åŒ…

### å‚æ•°

- **name: <STRING>** # åŒ…çš„åç§°
- **state: <STRING>** # æŒ‡å®šè¦æ‰§è¡Œçš„æ“ä½œï¼Œæ˜¯å®‰è£…è¿˜æ˜¯ç§»é™¤åŒ…ã€‚å¯ç”¨çš„å€¼æœ‰å¦‚ä¸‹å‡ ä¸ªï¼š
  - absent ä¸ removed # ç§»é™¤æŒ‡å®šçš„åŒ…
  - installed ä¸ present # ç®€å•å¾—ç¡®ä¿å®‰è£…äº†æŒ‡å®šçš„åŒ…
  - latest # å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„åŒ…ï¼Œè‹¥å½“å‰åŒ…ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œåˆ™æ›´æ–°å®ƒã€‚

### åº”ç”¨ç¤ºä¾‹

å®‰è£… bash-completion ä¸ vim çš„æœ€æ–°ç‰ˆæœ¬çš„åŒ…

```bash
ansible all -m yum -a "name=net-bash-completion,vim state=latest"
```

```bash
- name: å®‰è£…è¿ç»´å·¥å…·
  yum:
    name: ['bash-completion','vim']
    state: latest
```

# System # ç³»ç»Ÿæ¨¡å—

> å®˜æ–¹æ–‡æ¡£ï¼š<https://docs.ansible.com/ansible/latest/modules/list_of_system_modules.html>

- [aix_devices â€“ Manages AIX devices](https://docs.ansible.com/ansible/2.9/modules/aix_devices_module.html#aix-devices-module)
- [aix_filesystem â€“ Configure LVM and NFS file systems for AIX](https://docs.ansible.com/ansible/2.9/modules/aix_filesystem_module.html#aix-filesystem-module)
- [aix_inittab â€“ Manages the inittab on AIX](https://docs.ansible.com/ansible/2.9/modules/aix_inittab_module.html#aix-inittab-module)
- [aix_lvg â€“ Manage LVM volume groups on AIX](https://docs.ansible.com/ansible/2.9/modules/aix_lvg_module.html#aix-lvg-module)
- [aix_lvol â€“ Configure AIX LVM logical volumes](https://docs.ansible.com/ansible/2.9/modules/aix_lvol_module.html#aix-lvol-module)
- [alternatives â€“ Manages alternative programs for common commands](https://docs.ansible.com/ansible/2.9/modules/alternatives_module.html#alternatives-module)
- [at â€“ Schedule the execution of a command or script file via the at command](https://docs.ansible.com/ansible/2.9/modules/at_module.html#at-module)
- [authorized_key â€“ Adds or removes an SSH authorized key](https://docs.ansible.com/ansible/2.9/modules/authorized_key_module.html#authorized-key-module)
- [awall â€“ Manage awall policies](https://docs.ansible.com/ansible/2.9/modules/awall_module.html#awall-module)
- [beadm â€“ Manage ZFS boot environments on FreeBSD/Solaris/illumos systems](https://docs.ansible.com/ansible/2.9/modules/beadm_module.html#beadm-module)
- [capabilities â€“ Manage Linux capabilities](https://docs.ansible.com/ansible/2.9/modules/capabilities_module.html#capabilities-module)
- [cron â€“ Manage cron.d and crontab entries](https://docs.ansible.com/ansible/2.9/modules/cron_module.html#cron-module)
- [cronvar â€“ Manage variables in crontabs](https://docs.ansible.com/ansible/2.9/modules/cronvar_module.html#cronvar-module)
- [crypttab â€“ Encrypted Linux block devices](https://docs.ansible.com/ansible/2.9/modules/crypttab_module.html#crypttab-module)
- [dconf â€“ Modify and read dconf database](https://docs.ansible.com/ansible/2.9/modules/dconf_module.html#dconf-module)
- [debconf â€“ Configure a .deb package](https://docs.ansible.com/ansible/2.9/modules/debconf_module.html#debconf-module)
- [facter â€“ Runs the discovery program facter on the remote system](https://docs.ansible.com/ansible/2.9/modules/facter_module.html#facter-module)
- [filesystem â€“ Makes a filesystem](https://docs.ansible.com/ansible/2.9/modules/filesystem_module.html#filesystem-module)
- [firewalld â€“ Manage arbitrary ports/services with firewalld](https://docs.ansible.com/ansible/2.9/modules/firewalld_module.html#firewalld-module)
- [gather_facts â€“ Gathers facts about remote hosts](https://docs.ansible.com/ansible/2.9/modules/gather_facts_module.html#gather-facts-module)
- [gconftool2 â€“ Edit GNOME Configurations](https://docs.ansible.com/ansible/2.9/modules/gconftool2_module.html#gconftool2-module)
- [getent â€“ A wrapper to the unix getent utility](https://docs.ansible.com/ansible/2.9/modules/getent_module.html#getent-module)
- [group â€“ Add or remove groups](https://docs.ansible.com/ansible/2.9/modules/group_module.html#group-module)
- [hostname â€“ Manage hostname](https://docs.ansible.com/ansible/2.9/modules/hostname_module.html#hostname-module)
- [interfaces_file â€“ Tweak settings in /etc/network/interfaces files](https://docs.ansible.com/ansible/2.9/modules/interfaces_file_module.html#interfaces-file-module)
- [iptables â€“ Modify iptables rules](https://docs.ansible.com/ansible/2.9/modules/iptables_module.html#iptables-module)
- [java_cert â€“ Uses keytool to import/remove key from java keystore (cacerts)](https://docs.ansible.com/ansible/2.9/modules/java_cert_module.html#java-cert-module)
- [java_keystore â€“ Create or delete a Java keystore in JKS format](https://docs.ansible.com/ansible/2.9/modules/java_keystore_module.html#java-keystore-module)
- [kernel_blacklist â€“ Blacklist kernel modules](https://docs.ansible.com/ansible/2.9/modules/kernel_blacklist_module.html#kernel-blacklist-module)
- [known_hosts â€“ Add or remove a host from the known_hosts file](https://docs.ansible.com/ansible/2.9/modules/known_hosts_module.html#known-hosts-module)
- [listen_ports_facts â€“ Gather facts on processes listening on TCP and UDP ports](https://docs.ansible.com/ansible/2.9/modules/listen_ports_facts_module.html#listen-ports-facts-module)
- [locale_gen â€“ Creates or removes locales](https://docs.ansible.com/ansible/2.9/modules/locale_gen_module.html#locale-gen-module)
- [lvg â€“ Configure LVM volume groups](https://docs.ansible.com/ansible/2.9/modules/lvg_module.html#lvg-module)
- [lvol â€“ Configure LVM logical volumes](https://docs.ansible.com/ansible/2.9/modules/lvol_module.html#lvol-module)
- [make â€“ Run targets in a Makefile](https://docs.ansible.com/ansible/2.9/modules/make_module.html#make-module)
- [mksysb â€“ Generates AIX mksysb rootvg backups](https://docs.ansible.com/ansible/2.9/modules/mksysb_module.html#mksysb-module)
- [modprobe â€“ Load or unload kernel modules](https://docs.ansible.com/ansible/2.9/modules/modprobe_module.html#modprobe-module)
- [mount â€“ Control active and configured mount points](https://docs.ansible.com/ansible/2.9/modules/mount_module.html#mount-module)
- [nosh â€“ Manage services with nosh](https://docs.ansible.com/ansible/2.9/modules/nosh_module.html#nosh-module)
- [ohai â€“ Returns inventory data from Ohai](https://docs.ansible.com/ansible/2.9/modules/ohai_module.html#ohai-module)
- [open_iscsi â€“ Manage iSCSI targets with Open-iSCSI](https://docs.ansible.com/ansible/2.9/modules/open_iscsi_module.html#open-iscsi-module)
- [openwrt_init â€“ Manage services on OpenWrt](https://docs.ansible.com/ansible/2.9/modules/openwrt_init_module.html#openwrt-init-module)
- [osx_defaults â€“ Manage macOS user defaults](https://docs.ansible.com/ansible/2.9/modules/osx_defaults_module.html#osx-defaults-module)
- [pam_limits â€“ Modify Linux PAM limits](https://docs.ansible.com/ansible/2.9/modules/pam_limits_module.html#pam-limits-module)
- [pamd â€“ Manage PAM Modules](https://docs.ansible.com/ansible/2.9/modules/pamd_module.html#pamd-module)
- [parted â€“ Configure block device partitions](https://docs.ansible.com/ansible/2.9/modules/parted_module.html#parted-module)
- [pids â€“ Retrieves process IDs list if the process is running otherwise return empty list](https://docs.ansible.com/ansible/2.9/modules/pids_module.html#pids-module)
- [ping â€“ Try to connect to host, verify a usable python and return pong on success](https://docs.ansible.com/ansible/2.9/modules/ping_module.html#ping-module)
- [puppet â€“ Runs puppet](https://docs.ansible.com/ansible/2.9/modules/puppet_module.html#puppet-module)
- [python_requirements_info â€“ Show python path and assert dependency versions](https://docs.ansible.com/ansible/2.9/modules/python_requirements_info_module.html#python-requirements-info-module)
- [reboot â€“ Reboot a machine](https://docs.ansible.com/ansible/2.9/modules/reboot_module.html#reboot-module)
- [runit â€“ Manage runit services](https://docs.ansible.com/ansible/2.9/modules/runit_module.html#runit-module)
- [seboolean â€“ Toggles SELinux booleans](https://docs.ansible.com/ansible/2.9/modules/seboolean_module.html#seboolean-module)
- [sefcontext â€“ Manages SELinux file context mapping definitions](https://docs.ansible.com/ansible/2.9/modules/sefcontext_module.html#sefcontext-module)
- [selinux â€“ Change policy and state of SELinux](https://docs.ansible.com/ansible/2.9/modules/selinux_module.html#selinux-module)
- [selinux_permissive â€“ Change permissive domain in SELinux policy](https://docs.ansible.com/ansible/2.9/modules/selinux_permissive_module.html#selinux-permissive-module)
- [selogin â€“ Manages linux user to SELinux user mapping](https://docs.ansible.com/ansible/2.9/modules/selogin_module.html#selogin-module)
- [seport â€“ Manages SELinux network port type definitions](https://docs.ansible.com/ansible/2.9/modules/seport_module.html#seport-module)
- [service â€“ Manage services](https://docs.ansible.com/ansible/2.9/modules/service_module.html#service-module)
- [service_facts â€“ Return service state information as fact data](https://docs.ansible.com/ansible/2.9/modules/service_facts_module.html#service-facts-module)
- [setup â€“ Gathers facts about remote hosts](https://docs.ansible.com/ansible/2.9/modules/setup_module.html#setup-module)
- [solaris_zone â€“ Manage Solaris zones](https://docs.ansible.com/ansible/2.9/modules/solaris_zone_module.html#solaris-zone-module)
- [svc â€“ Manage daemontools services](https://docs.ansible.com/ansible/2.9/modules/svc_module.html#svc-module)
- [sysctl â€“ Manage entries in sysctl.conf](https://docs.ansible.com/ansible/2.9/modules/sysctl_module.html#sysctl-module)
- [syspatch â€“ Manage OpenBSD system patches](https://docs.ansible.com/ansible/2.9/modules/syspatch_module.html#syspatch-module)
- [systemd â€“ Manage services](https://docs.ansible.com/ansible/2.9/modules/systemd_module.html#systemd-module)
- [sysvinit â€“ Manage SysV services](https://docs.ansible.com/ansible/2.9/modules/sysvinit_module.html#sysvinit-module)
- [timezone â€“ Configure timezone setting](https://docs.ansible.com/ansible/2.9/modules/timezone_module.html#timezone-module)
- [ufw â€“ Manage firewall with UFW](https://docs.ansible.com/ansible/2.9/modules/ufw_module.html#ufw-module)
- [user â€“ Manage user accounts](https://docs.ansible.com/ansible/2.9/modules/user_module.html#user-module)
- [vdo â€“ Module to control VDO](https://docs.ansible.com/ansible/2.9/modules/vdo_module.html#vdo-module)
- [xfconf â€“ Edit XFCE4 Configurations](https://docs.ansible.com/ansible/2.9/modules/xfconf_module.html#xfconf-module)
- [xfs_quota â€“ Manage quotas on XFS filesystems](https://docs.ansible.com/ansible/2.9/modules/xfs_quota_module.html#xfs-quota-module)

## [systemd](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/systemd_module.html) # æ§åˆ¶è¿œç¨‹ä¸»æœºä¸Šä»¥ systemd è¿è¡Œçš„æœåŠ¡

### å‚æ•°

- **name: <STRING>** # Unit çš„åç§°
- **state: <STRING>** # è®¾ç½® Unit çš„çŠ¶æ€ã€‚å¯ç”¨çš„å€¼æœ‰
  - reloaded
  - restarted
  - started
  - stopped
- **enabled: <BOOLEAN>** # è®¾ç½® Unit æ˜¯å¦åº”è¯¥è‡ªå¯åŠ¨

### ä½¿ç”¨ç¤ºä¾‹

```yaml
- name: å¯åŠ¨å¹¶è®¾ç½®è‡ªå¯åŠ¨kubeletä¸kube-proxyæœåŠ¡
  systemd:
    name: "{{item}}"
    daemon_reload: yes
    state: started
    enabled: yes
  with_items:
    - kubelet
    - kube-proxy
```

## [user](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/user_module.html) # ç®¡ç†è¿œç¨‹ä¸»æœºä¸Šçš„ç”¨æˆ·è´¦æˆ·

### å‚æ•°

user æ¨¡å—ä½¿ç”¨ç¤ºä¾‹ï¼šè¯¥ç¤ºä¾‹åŒæ ·é€‚ç”¨äºæ›´æ”¹å¯†ç 

```yaml
- name: åˆ›å»ºk8sç”¨æˆ·
  user:
    name: developer #æŒ‡å®šè¦åˆ›å»ºçš„ç”¨æˆ·å
    password: "$6$mysecretsalt$QjSLl.VQoxPKJkBE9.oLX82C5P4tAMH8UfFRpkxgkqSg2GNob8Y39hj5/cl7o0gbpPXVBGaB9oLuCPfVhIhyA0" # ä½¿ç”¨ä¸‹é¢Noteä¸­çš„å‘½ä»¤æ¥è·å–åŠ å¯†åçš„å¯†ç 
- name: åŒæ—¶æ›´æ”¹å¤šä¸ªç”¨æˆ·çš„å¯†ç 
    user:
      name: "{{ item.name }}"
      password: "{{ item.chpass | password_hash('sha512') }}" # ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æ˜æ–‡ä½œä¸ºå¯†ç 
      update_password: always
    with_items:
    - { name: 'root', chpass: 'admin#123' }
    - { name: 'test', chpass: 'yjun@123' }
```

Noteï¼šç”ŸæˆåŠ å¯†å¯†ç çš„æ–¹å¼

- ansible all -i localhost, -m debug -a "msg={{ 'mypassword' | password\_hash('sha512', 'mysecretsalt') }}"
  - å‘½ä»¤ä¸­çš„ mypassword å°±æ˜¯æƒ³è¦ä½¿ç”¨çš„å¯†ç ï¼Œmysecretsalt åˆ™æ˜¯å¯†ç å­¦ä¸­åŠ çš„ç›ï¼Œè¯¦è§<https://zh.wikipedia.org/wiki/%E7%9B%90_(%E5%AF%86%E7%A0%81%E5%AD%A6)>
  - å°†è¾“å‡ºä¿¡æ¯å¼•å·å†…çš„éƒ¨åˆ†ç›´æ¥å½“åš password çš„å€¼å³å¯

# Utilities å®ç”¨ç¨‹åºæ¨¡å—

## Helper

- [meta â€“ Execute Ansible â€˜actionsâ€™](https://docs.ansible.com/ansible/2.9/modules/meta_module.html#meta-module)

## Logic

- [assert â€“ Asserts given expressions are true](https://docs.ansible.com/ansible/2.9/modules/assert_module.html#assert-module)
- [async_status â€“ Obtain status of asynchronous task](https://docs.ansible.com/ansible/2.9/modules/async_status_module.html#async-status-module)
- [debug â€“ Print statements during execution](https://docs.ansible.com/ansible/2.9/modules/debug_module.html#debug-module)
- [fail â€“ Fail with custom message](https://docs.ansible.com/ansible/2.9/modules/fail_module.html#fail-module)
- [import_playbook â€“ Import a playbook](https://docs.ansible.com/ansible/2.9/modules/import_playbook_module.html#import-playbook-module)
- [import_role â€“ Import a role into a play](https://docs.ansible.com/ansible/2.9/modules/import_role_module.html#import-role-module)
- [import_tasks â€“ Import a task list](https://docs.ansible.com/ansible/2.9/modules/import_tasks_module.html#import-tasks-module)
- [include â€“ Include a play or task list](https://docs.ansible.com/ansible/2.9/modules/include_module.html#include-module)
- [include_role â€“ Load and execute a role](https://docs.ansible.com/ansible/2.9/modules/include_role_module.html#include-role-module)
- [include_tasks â€“ Dynamically include a task list](https://docs.ansible.com/ansible/2.9/modules/include_tasks_module.html#include-tasks-module)
- [include_vars â€“ Load variables from files, dynamically within a task](https://docs.ansible.com/ansible/2.9/modules/include_vars_module.html#include-vars-module)
- [pause â€“ Pause playbook execution](https://docs.ansible.com/ansible/2.9/modules/pause_module.html#pause-module)
- [set_fact â€“ Set host facts from a task](https://docs.ansible.com/ansible/2.9/modules/set_fact_module.html#set-fact-module)
- [set_stats â€“ Set stats for the current ansible run](https://docs.ansible.com/ansible/2.9/modules/set_stats_module.html#set-stats-module)
- [wait_for â€“ Waits for a condition before continuing](https://docs.ansible.com/ansible/2.9/modules/wait_for_module.html#wait-for-module)
- [wait_for_connection â€“ Waits until remote system is reachable/usable](https://docs.ansible.com/ansible/2.9/modules/wait_for_connection_module.html#wait-for-connection-module)

## [debug](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/debug_module.html) # è¾“å‡ºå˜é‡æˆ–è¡¨è¾¾å¼

è¯¥æ¨¡å—å¯ä»¥åœ¨ playbook æ‰§è¡ŒæœŸé—´ï¼Œè¾“å‡ºæŒ‡å®šçš„å†…å®¹ï¼Œè€Œä¸ç”¨åœæ­¢ playbookã€‚å¸¸ç”¨äºè°ƒè¯•å˜é‡æˆ–è€…è¡¨è¾¾å¼ã€‚æ¯”å¦‚ä½¿ç”¨ shell æ¨¡å—çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ debug æ¨¡å—æ¥è¾“å‡º shell æ¨¡å—å®šä¹‰çš„è¯­å¥çš„æ‰§è¡Œç»“æœ

å¸¸ä¸ when æŒ‡ä»¤ä¸€èµ·ä½¿ç”¨ã€‚

```yaml
- name: Print the gateway for each host when defined
  ansible.builtin.debug:
    msg: System {{ inventory_hostname }} has gateway {{ ansible_default_ipv4.gateway }}
  when: ansible_default_ipv4.gateway is defined

- name: Get uptime information
  ansible.builtin.shell: /usr/bin/uptime
  register: result

- name: Print return information from the previous task
  ansible.builtin.debug:
    var: result
    verbosity: 2

- name: Display all variables/facts known for a host
  ansible.builtin.debug:
    var: hostvars[inventory_hostname]
    verbosity: 4

- name: Prints two lines of messages, but only if there is an environment value set
  ansible.builtin.debug:
    msg:
      - "Provisioning based on YOUR_KEY which is: {{ lookup('env', 'YOUR_KEY') }}"
      - "These servers were built using the password of '{{ password_used }}'. Please retain this for later use."
```

## [fail](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/fail_module.html) # ç»ˆæ­¢ä»»åŠ¡çš„æ‰§è¡Œï¼Œå¹¶è¾“å‡ºè‡ªå®šä¹‰çš„æ¶ˆæ¯

## import ä¸ include æ¨¡å— # åœ¨ä¸»ä»»åŠ¡ä¸­å¯¼å…¥å…¶ä»–ä»»åŠ¡æˆ–å˜é‡

> å‚è€ƒï¼š
> - <https://www.cnblogs.com/mauricewei/p/10054041.html>
> - https://docs.ansible.com/ansible/2.5/user\_guide/playbooks\_reuse.html#differences-between-static-and-dynamic
> - https://docs.ansible.com/ansible/2.5/user\_guide/playbooks\_conditionals.html#applying-when-to-roles-imports-and-includes

éšç€è¦ç®¡ç†çš„æœåŠ¡ä¸æ–­å¢å¤šï¼Œæˆ‘ä»¬çš„ Playbook ä¹Ÿä¼šè¶Šæ¥è¶Šå¤§ï¼Œå†…å®¹è¶Šæ¥è¶Šå¤šï¼Œç®¡ç†èµ·æ¥ä¹Ÿä¼šéšç€å¤æ‚ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŸäº› tasks åˆ†æ•£åˆ°å¾ˆå¤šæ–‡ä»¶ä¸­ï¼Œé€šè¿‡ import å’Œ include ç›¸å…³æ¨¡å—ï¼Œå®ç° tasks æ–‡ä»¶ä¹‹é—´çš„ç›¸äº’è°ƒç”¨ã€‚

è¯´ç™½äº†ï¼Œå°±æ˜¯èšåˆå¤šä¸ªæ–‡ä»¶çš„ tasksã€‚

ä¸€å…±æœ‰å¦‚ä¸‹å‡ ç§æ¨¡å—å¯ä»¥å®ç°è¿™ç±»åŠŸèƒ½ï¼š

- import_playbook
- [import_role](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/import_role_module.html) #
- import_tasks # **Static(é™æ€)** æ–¹æ³•ï¼Œåœ¨ playbooks è§£æé˜¶æ®µå°†çˆ¶ task å˜é‡å’Œå­ task å˜é‡å…¨éƒ¨è¯»å–å¹¶åŠ è½½
- include
- include_tasks # **Dynamic(åŠ¨æ€)** æ–¹æ³•ï¼Œåœ¨æ‰§è¡Œ play ä¹‹å‰æ‰ä¼šåŠ è½½è‡ªå·±å˜é‡
- include_vars

### åŠ¨æ€ä¸é™æ€å¯¼å…¥ tasks çš„åŒºåˆ«

#### åŒºåˆ«ä¸€

- import_tasks(Static) æ–¹æ³•ä¼šåœ¨ playbooks è§£æé˜¶æ®µå°†çˆ¶ task å˜é‡å’Œå­ task å˜é‡å…¨éƒ¨è¯»å–å¹¶åŠ è½½
- include_tasks(Dynamic) æ–¹æ³•åˆ™æ˜¯åœ¨æ‰§è¡Œ play ä¹‹å‰æ‰ä¼šåŠ è½½è‡ªå·±å˜é‡

å¯èƒ½æœ‰ç‚¹æ‡µï¼Œä¸¾ä¾‹è¯´æ˜
**ä¸‹é¢ä¸¤ä¸ªä¾‹å­æ˜¯ test.yml é‡Œçš„ task è°ƒç”¨ test2.ymlï¼Œä¸åŒä¹‹å¤„æ˜¯ä¸€ä¸ªä½¿ç”¨ import_tasks å¦ä¸€ä¸ªä½¿ç”¨ include_tasks**&#x20;
import_tasksï¼šåœ¨æ‰§è¡Œ tasks ä¹‹å‰ï¼Œansible è§£é‡Šå™¨ä¼šå…ˆåŠ è½½ test.yml é‡Œçš„å˜é‡åŒæ—¶å†åŠ è½½ test2.yml é‡Œçš„å˜é‡ï¼Œé‚£ä¹ˆ ansible_os_family å˜é‡ä¼šæœ‰ä¸€ä¸ªè¦†ç›–ç°è±¡äº§ç”Ÿï¼Œæœ€ç»ˆçš„å‚æ•°åº”ä¸ºâ€œBlackHatâ€ï¼Œæ‰€ä»¥å½“ test.yml é‡Œæ‰§è¡Œ when è¯­å¥æ—¶ï¼Œansible_os_family è¢«åˆ¤å®šä¸ºâ€œBlackHatâ€ï¼Œwhen çš„åˆ¤æ–­ç»“æœä¸º falseï¼Œä¹Ÿå°±ä¸ä¼šè°ƒç”¨ test2.yml äº†

æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼Œtest2.yml é‡Œçš„ task éƒ½è¢« skip äº†ï¼š

include_tasksï¼šansible ä¼šåœ¨å®Œå…¨æ‰§è¡Œå®Œ test.yml é‡Œçš„ task åæ‰ä¼šåŠ è½½ test2.yml é‡Œçš„å˜é‡ï¼Œæ‰€ä»¥å½“æ‰§è¡Œ when è¯­å¥æ—¶ï¼Œansible_os_family çš„å‚æ•°åº”ä¸ºâ€œRedHatâ€ï¼Œæ­¤æ—¶ when è¯­å¥åˆ¤æ–­ç»“æœæ˜¯ trueï¼Œä¹Ÿå°±æ˜¯ test2.yml é‡Œçš„ tasks ä¼šè¢«æ‰§è¡Œã€‚
å°†ç¬¬ä¸€å¼ å›¾ test.yaml é‡Œçš„ import_tasks æ¢æˆ include_tasksï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š

æˆ‘ä»¬å‘ç°è‡ª test2.yml é‡Œçš„ task è¢«æ‰§è¡Œäº†ï¼Œå¹¶ä¸”åœ¨ test2.yml é‡Œ ansible_os_family çš„å‚æ•°å˜ä¸ºäº†â€œBlackHatâ€ã€‚
è¿™å°±æ˜¯ include_tasts å’Œ import_tasks æ–¹æ³•çš„ç¬¬ä¸€ä¸ªåŒºåˆ«ã€‚

#### åŒºåˆ«äºŒ

- include_tasks æ–¹æ³•è°ƒç”¨çš„æ–‡ä»¶åç§°å¯ä»¥åŠ å˜é‡
- import_tasks æ–¹æ³•è°ƒç”¨çš„æ–‡ä»¶åç§°ä¸å¯ä»¥æœ‰å˜é‡

è¿™ä¸ªåŒºåˆ«æ¯”è¾ƒç®€å•ï¼Œç›´æ¥ä¸Šç¤ºä¾‹ï¼š
å½“è°ƒç”¨çš„æ–‡ä»¶åç§°æœ‰å˜é‡æ—¶ï¼Œä½¿ç”¨ include_tasks æ–¹æ³•ï¼š

èƒ½å¤Ÿæ­£å¸¸è°ƒç”¨ test2.ymlï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š
&#x20;
å½“ä½¿ç”¨ import_tasks æ–¹æ³•æ—¶ï¼Œæ‰§è¡ŒæŠ¥é”™ã€‚
ansible ä¹Ÿç»™å‡ºäº†é”™è¯¯åŸå› ï¼Œå½“ä½¿ç”¨ static include æ—¶ï¼Œæ˜¯ä¸èƒ½ä½¿ç”¨å˜é‡çš„ï¼š
&#x20;
è¿™å°±æ˜¯ include_tasts å’Œ import_tasks æ–¹æ³•çš„ç¬¬äºŒä¸ªåŒºåˆ«ã€‚
